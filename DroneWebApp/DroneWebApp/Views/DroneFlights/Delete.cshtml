@model DroneWebApp.Models.DroneFlight

@{
    ViewBag.Title = "Delete Drone Flight";
}

<br />
<h2>Delete Flight: <font color='red'>@Model.FlightId (@Model.Location, @Model.Date.ToString("dd/MM/yyyy"))</font></h2>

@if (@ViewBag.ErrorDroneFlightDelete != null)
{
    <div class="alert alert-danger" role="alert">
        @ViewBag.ErrorDroneFlightDelete
    </div>
}
else if (@Model.hasXYZ || @Model.hasCTRLs || @Model.hasGCPs || @Model.hasDepInfo || @Model.hasDestInfo || @Model.hasTFW || @Model.hasDroneLog || @Model.hasQR)
{
    <div class="alert alert-danger" role="alert">
        <strong>WARNING</strong>: This drone flight currently has <strong>documents</strong> uploaded to it. Deleting this flight will result in the loss of these documents. <br /><br />
        Are you sure you want to continue and <strong>delete</strong> this flight with its documents?
    </div>
}
else
{
    <div class="alert alert-danger" role="alert">
        <strong>WARNING</strong>: Are you sure you want to delete this <strong>drone flight</strong>?
    </div>
}
<div>
    <h4>Drone Flight @Model.FlightId</h4>
    <hr />
    <table class="table table-bordered table-hover table-striped" style="table-layout: fixed">
        <tr>
            <th>
                @Html.DisplayName("Project Code")
            </th>
            <td>
                @Html.DisplayFor(model => model.Project.ProjectCode)
            </td>
        </tr>
        
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Location)
            </th>
            <td>
                @Html.DisplayFor(model => model.Location)
            </td>
        </tr>

        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Date)
            </th>

            <td>
                @Model.Date.ToString("dd/MM/yyyy")
            </td>
        </tr>

        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Drone)
            </th>
            <td>
                @Html.ActionLink(@Model.Drone.DroneName, "Details", "Drones", new { id = @Model.DroneId }, new { @class = "btn btn-primary btn-sm", style = "color: white" })
            </td>
        </tr>

        <tr>
            <th>
                @Html.DisplayName("Pilot")
            </th>
            <td>
                @Html.ActionLink(@Model.Pilot.PilotName, "Details", "Pilots", new { id = @Model.PilotId }, new { @class = "btn btn-primary btn-sm", style = "color: white" })
            </td>
        </tr>

        <tr>
            <th>
                @Html.DisplayName("Starting time (UTC)")
            </th>
            <td>
                @if (@Model.hasDepInfo)
                {
                    @Model.DepartureInfo.UTCTime.ToString()
                }
            </td>
        </tr>

        <tr>
            <th>
                @Html.DisplayName("Ending time (UTC)")
            </th>
            <td>
                @if (@Model.hasDestInfo)
                {
                    @Model.DestinationInfo.UTCTime.ToString()
                }
            </td>
        </tr>

        <tr>
            <th>
                @Html.DisplayName("Type of Activity")
            </th>
            <td>
                @Html.DisplayFor(model => model.TypeOfActivity)
            </td>
        </tr>

        <tr>
            <th>
                @Html.DisplayName("Remarks")
            </th>
            <td>
                @Html.DisplayFor(model => model.Remarks)
            </td>
        </tr>

        <tr>
            <th>
                Quality Report
            </th>
            <td>
                @if (!@Model.hasQR)
                {
                    @Html.ActionLink("QR", "QualityReport", new { id = @Model.FlightId }, new { @class = "btn btn-danger btn-sm", style = "color: white" })
                }
                else
                {
                    @Html.ActionLink("QR", "QualityReport", new { id = @Model.FlightId }, new { @class = "btn btn-success btn-sm", style = "color: white" })
                }
            </td>
        </tr>

        <tr>
            <th>
                Ground Control Points
            </th>
            <td>
                @if (!@Model.hasGCPs)
                {
                    @Html.ActionLink("GCP", "GCPPoints", new { id = @Model.FlightId }, new { @class = "btn btn-danger btn-sm", style = "color: white" })
                }
                else
                {
                    @Html.ActionLink("GCP", "GCPPoints", new { id = @Model.FlightId }, new { @class = "btn btn-success btn-sm", style = "color: white" })
                }
            </td>
        </tr>

        <tr>
            <th>
                Control Points
            </th>
            <td>
                @if (!@Model.hasCTRLs)
                {
                    @Html.ActionLink("CTRL", "CTRLPoints", new { id = @Model.FlightId }, new { @class = "btn btn-danger btn-sm", style = "color: white" })
                }
                else
                {
                    @Html.ActionLink("CTRL", "CTRLPoints", new { id = @Model.FlightId }, new { @class = "btn btn-success btn-sm", style = "color: white" })
                }
            </td>
        </tr>

        <tr>
            <th>
                TFW
            </th>
            <td>
                @if (!@Model.hasTFW)
                {
                    @Html.ActionLink("TFW", "TFW", new { id = @Model.FlightId }, new { @class = "btn btn-danger btn-sm", style = "color: white" })
                }
                else
                {
                    @Html.ActionLink("TFW", "TFW", new { id = @Model.FlightId }, new { @class = "btn btn-success btn-sm", style = "color: white" })
                }
            </td>
        </tr>

        <tr>
            <th>
                XYZ
            </th>
            <td>
                @if (!@Model.hasXYZ)
                {
                    <div class="btn btn-danger btn-sm disabled">
                        <span>
                            XYZ
                        </span>
                    </div>
                }
                else
                {
                    <div class="btn btn-success btn-sm disabled">
                        <span>
                            XYZ
                        </span>
                    </div>
                }
            </td>
        </tr>

        <tr>
            <th>
                Drone Log
            </th>
            <td>
                @if (@Model.DroneLogEntries.Count == 0)
                {
                    <div class="btn btn-danger btn-sm disabled">
                        <span>
                            Drone Log
                        </span>
                    </div>
                }
                else
                {
                    <div class="btn btn-success btn-sm disabled">
                        <span>
                            Drone Log
                        </span>
                    </div>
                }
            </td>
        </tr>
    </table>

    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()

        <div class="form-actions no-color">
            <input type="submit" value="Delete" class="btn btn-default" /> |
            @Html.ActionLink("Back to Drone Flights List", "Index")
        </div>
    }
</div>
