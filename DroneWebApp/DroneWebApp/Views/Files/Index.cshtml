@{
    ViewBag.Title = "File Upload";
}

<br />
<h2 class="textAlignCenter">File Upload</h2>

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="@Url.Action("Index", "DroneFlights")">Drone Flights</a></li>
        <li class="breadcrumb-item active" aria-current="page">Upload files for Drone Flight @ViewBag.FlightId</li>
    </ol>
</nav>

@* Start message *@
<div id="initialMessage">
    <h4>Please select the files you would like to add to <strong>Flight @ViewBag.FlightId</strong> (<strong>@ViewBag.Location</strong>, <strong>@ViewBag.Date</strong>).</h4>
</div>
<br />

@* Errors *@
<div id="errorField" class="alert alert-warning" hidden>
    <strong>Flight @ViewBag.FlightId</strong> (<strong>@ViewBag.Location</strong>, <strong>@ViewBag.Date</strong>)<br />
    <span id="errorMessage"></span>
</div>

@* Progress *@
<div id="progressField" class="alert alert-info" hidden>
    Adding files to <strong>Flight @ViewBag.FlightId</strong> (<strong>@ViewBag.Location</strong>, <strong>@ViewBag.Date</strong>)<br/>
    <strong><span class="amountParsed"></span></strong> out of <strong><span class="totalParsed"></span></strong> files. Please wait...
</div>

@* Success *@
<div id="endField" class="alert alert-success" role="alert" hidden>
    Parser successfully finished and read <strong><span class="amountParsed"></span></strong> out of <strong><span class="totalParsed"></span></strong> files were read, of which <strong><span id="totalFailed"></span></strong> files failed to parse.
    <br />
    <div id="failedFilesList" hidden>The files that were not parsed are:</div>
    <div id="showNavigation">
        <br />
        @Html.ActionLink("Back to Drone Flight Details", "Details", "DroneFlights", new { id = @ViewBag.FlightId }, new { @class = "btn btn-primary btn-sm" }) |
        @Html.ActionLink("Back to Drone Flights List", "Index", "DroneFlights", null, new { @class = "btn btn-primary btn-sm" })
    </div>
</div>


@if (ViewBag.ErrorMessage != null)
{
    <div class="btn-danger btn-sm" role="alert">
        @ViewBag.ErrorMessage
    </div>
}


<div class="card paddingErrorIndex">
    <form class="form-inline" method="post" enctype="multipart/form-data" id="Myform">
        <div class="form-group">
            <label for="InputFile">File:</label>
            <input type="file" class="form-control mx-sm-3" id="file" name="files" accept=".pdf, .dat, .txt, .csv, .xyz, .tfw, .jpg" multiple>
        </div>
        <div id="uploadbtn" class="form-group">
            <input id="uploadbtnSubmit" type="submit" value="Upload" class="btn btn-success mx-sm-3">
        </div>
    </form>
</div>

<div id="uploadstatus"></div>
<div id="progressbar"></div>

<br />
<br />
<p>
    @Html.ActionLink("Back to Drone Flight Details", "Details", "DroneFlights", new { id = @ViewBag.FlightId}, new { @class = "btn btn-primary btn-sm" }) |
    @Html.ActionLink("Back to Drone Flights List", "Index", "DroneFlights", null, new { @class = "btn btn-primary btn-sm" })
</p>